~function(t){function s(t){var s=this,n=function(t){s.resolve(t)},e=function(t){s.reject(t)};s.st="default",s.rsq=[],s.rjq=[],"function"==typeof t&&t(n,e)}s.fn=s.prototype,s.fn.then=function(t,s){return this.rsq.push(t),this.rjq.push(s),this},s.fn.resolve=function(t){("resolved"===this.st||"default"===this.st)&&(this.st="resolved",this._doQ(t))},s.fn.reject=function(t){("rejected"===this.st||"default"===this.st)&&(this.st="rejected",this._doQ(t))},s.fn._doQ=function(t){if(this.rsq.length||this.rjq.length){var n,e=this.rsq.shift(),i=this.rjq.shift();"resolved"===this.st&&"function"==typeof e&&(n=e(t)),"rejected"===this.st&&"function"==typeof i&&(n=i(t)),n instanceof s?(n.rsq=this.rsq,n.rjq=this.rjq,this.rsq=[],this.rjq=[]):this._doQ(n)}},s.all=function(t){for(var n=new s,e=t.length,i=0,r=0;e>i;)t[i].then(function(){return function(){++r===e&&n.resolve()}}(i),function(t){n.reject(t)}),i++;return n},t.Promise=s}(window);