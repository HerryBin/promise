~function(t){var n=function(t){var n=this,e=function(t){n.resolve(t)},i=function(t){n.reject(t)};n.st="pending",n.rsq=[],n.rjq=[],"function"==typeof t&&t(e,i)},e=n.prototype;e.then=function(t,n){return this.rsq.push(t),this.rjq.push(n),this},e.catch=function(t){return this.then(null,t)},e.resolve=function(t){("resolved"===this.st||"pending"===this.st)&&(this.st="resolved",this._doQ(t))},e.reject=function(t){("rejected"===this.st||"pending"===this.st)&&(this.st="rejected",this._doQ(t))},e._doQ=function(t){if(this.rsq.length||this.rjq.length){var e,i=this.rsq.shift(),s=this.rjq.shift();if("resolved"===this.st&&"function"==typeof i&&(e=i(t)),"rejected"===this.st&&"function"==typeof s&&(e=s(t)),!(e instanceof n)){var r=e;e=new n(function(t){setTimeout(function(){t(r)},0)})}e.rsq=this.rsq.splice(0),e.rjq=this.rjq.splice(0)}},n.all=function(t){for(var e=new n,i=t.length,s=0,r=0;i>s;)t[s].then(function(){++r===i&&e.resolve()},function(t){e.reject(t)}),s++;return e},n.resolve=function(t){var e=new n;if(t&&"function"==typeof t.then){for(var i in e)t[i]=e[i];return t}return setTimeout(function(){e.resolve(t)},0),e},t.Promise=n}(window);