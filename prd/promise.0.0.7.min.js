~function(n){var t=0,e=1,o=2,i=function(n){if("function"!=typeof n)throw"Promise resolver undefined is not a function";var e=this,o=function(n){e.resolve(n)},i=function(n){e.reject(n)};e._status=t,e._onResolved=[],e._onRejected=[],n(o,i)},s=i.prototype;s.then=function(n,t){var s=this;return new i(function(u,r){var c=function(t){var e=n?n(t):t;i.isPromise(e)?e.then(function(n){u(n)}):u(e)},f=function(n){var e=t?t(n):n;r(e)};s._onResolved.push(c),s._onRejected.push(f),s._status===e&&c(s._value),s._status===o&&f(s._value)})},s.catch=function(n){return this.then(null,n)},s.resolve=function(n){if(this._status===t){this._status=e,this._value=n;for(var o=0,i=this._onResolved.length;i>o;o++)this._onResolved[o](n)}},s.reject=function(n){if(this._status===t){this._status=o,this._value=n;for(var e=0,i=this._onRejected.length;i>e;e++)this._onRejected[e](n)}},i.all=function(n){return i(function(t,e){for(var o=n.length,i=-1,s=0,u=[];++i<o;)~function(i){n[i].then(function(n){u[i]=n,++s===o&&t(u)},function(n){e(n)})}(i)})},i.race=function(n){return new i(function(t,e){for(var o=n.length,i=-1;++i<o;)n[i].then(function(n){t(n)},function(n){e(n)})})},i.resolve=function(n){return i.isPromise(n)?n:new i(function(n){n()})},i.reject=function(n){return i.isPromise(n)?n:new i(function(n,t){t()})},i.isPromise=function(n){return n instanceof i},n.Promise=n.Promise||i;try{module.exports=i}catch(u){}}(this);